<div class="container d-flex justify-content-center align-items-center vh-100">
    <div class="w-100" style="max-width: 400px;">
      <div class="text-center mb-4">
        <h3 class="fw-bold">Đặt Lại Mật Khẩu</h3>
        <p class="text-muted">Vui lòng nhập mật khẩu mới của bạn</p>
      </div>
  
      <form [formGroup]="resetForm" (ngSubmit)="onSubmit()">
        <!-- New Password Field -->
        <div class="form-floating mb-3">
          <input 
            [type]="showPassword ? 'text' : 'password'" 
            class="form-control" 
            id="newPassword"
            formControlName="newPassword"
            placeholder="Mật khẩu mới"
            [ngClass]="{'is-invalid': submitted && f['newPassword'].errors}"
          />
          <label for="newPassword">Mật khẩu mới</label>
          <span class="password-toggle" (click)="togglePasswordVisibility('newPassword')" *ngIf="!submitted || !f['newPassword'].errors">
            <i class="fa" [ngClass]="showPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
          </span>
          <div class="invalid-feedback" *ngIf="submitted && f['newPassword'].errors">
            {{ getErrorMessage('newPassword') }}
          </div>
        </div>
  
        <!-- Confirm Password Field -->
        <div class="form-floating mb-4">
          <input 
            [type]="showConfirmPassword ? 'text' : 'password'" 
            class="form-control" 
            id="confirmPassword"
            formControlName="confirmPassword"
            placeholder="Xác nhận mật khẩu"
            [ngClass]="{'is-invalid': submitted && f['confirmPassword'].errors}"
          />
          <label for="confirmPassword">Xác nhận mật khẩu</label>
          <span class="password-toggle" (click)="togglePasswordVisibility('confirmPassword')" *ngIf="!submitted || !f['confirmPassword'].errors">
            <i class="fa" [ngClass]="showConfirmPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
          </span>
          <div class="invalid-feedback" *ngIf="submitted && f['confirmPassword'].errors">
            {{ getErrorMessage('confirmPassword') }}
          </div>
        </div>
  
        <!-- Success Message -->
        <div class="alert alert-success" *ngIf="successMessage">
          {{ successMessage }}
        </div>
  
        <!-- Error Message -->
        <div class="alert alert-danger" *ngIf="error">
          {{ error }}
        </div>
  
        <!-- Submit Button -->
        <div class="d-grid mb-4">
          <button 
            class="btn btn-primary py-2" 
            type="submit"
            [disabled]="loading">
            <span class="spinner-border spinner-border-sm me-1" *ngIf="loading"></span>
            {{ loading ? 'Đang xử lý...' : 'Đặt Lại Mật Khẩu' }}
          </button>
        </div>
  
        <!-- Back to Login Link -->
        <div class="text-center">
          <p class="mb-0">
            <a routerLink="/auth/login" class="text-primary fw-bold text-decoration-none">Quay lại đăng nhập</a>
          </p>
        </div>
      </form>
    </div>
  </div>
